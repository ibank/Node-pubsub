<html>
<head>
<!-- A simple HTML page with jQuery logic to connect to a socket.io instance and receive updates. -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
<script type="text/javascript" src="socket.io.js"></script>
<script type="text/javascript" src="pubsub.js"></script>
<script type="text/javascript">
$(function() {

	// Create a new connection
	//var socket = new io.Socket('127.0.0.1', {
	//	port : 8000
	//});
	//socket.connect();

	// Display connected text.
	//socket.on('connect', function() {
	//	console.log('Connected to server...');
	//	socket.send({
	//	  action : "subscribe",
	//	  channel : "trololo"
	//	});
	//});

	// When we get a message, add the appropirate CSS class.
	//socket.on('message', function(data) {
	//	console.log('Received a message from the server: ' + data);
	//});
	
  var client = new Pubsub({
    port: 8000
  });
  
  client.connect();
  
  client.on("connect", function() {
    client.subscribe("trololo", function(data){
		  console.log('Received a message from the server: ' + data);
	  });	  
  });  

});
</script>
</style>
</head>
<body>
<h2>Redis PubSub + Socket.io Test</h2>
<div id="connect"></div>
</body>
</html>
